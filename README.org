* org-wild-notifier.el

[[https://github.com/emacsorphanage/org-wild-notifier.el/actions/workflows/test.yml][https://github.com/emacsorphanage/org-wild-notifier.el/actions/workflows/test.yml/badge.svg]]
[[https://stable.melpa.org/#/org-wild-notifier][file:https://stable.melpa.org/packages/org-wild-notifier-badge.svg]]
[[https://melpa.org/#/org-wild-notifier][file:https://melpa.org/packages/org-wild-notifier-badge.svg]]

** Overview

org-wild-notifier provides desktop notifications for org-agenda events. It aims to behave like a typical calendar application: unobtrusive and easy to configure.

** Maintenance

Maintenance has resumed under the Emacs Orphanage. Please file issues and pull requests in this repository.

** Comparison with Other Packages

- [[https://github.com/spegoraro/org-alert][org-alert]] notifies about deadlines every N minutes using the [[https://github.com/jwiegley/alert][alert]] package.
- [[https://code.orgmode.org/bzg/org-mode/raw/master/contrib/lisp/org-notify.el][org-notify]] is a feature-rich notification library from the Org contrib directory.

org-wild-notifier takes a different approach: it checks your agenda periodically and sends notifications at specific times before events, similar to how Google Calendar or other calendar applications handle reminders.

** Configuration

| Description                                                              | Variable                                     | Default value                         |
|--------------------------------------------------------------------------+----------------------------------------------+---------------------------------------|
| Alert time in minutes                                                    | org-wild-notifier-alert-time                 | '(10)                                 |
| Title of notifications                                                   | org-wild-notifier-notification-title         | Agenda                                |
| Notifications icon                                                       | org-wild-notifier-notification-icon          | nil                                   |
| Keyword whitelist (only notify for these)                                | org-wild-notifier-keyword-whitelist          | '("TODO")                             |
| Keyword blacklist (never notify for these)                               | org-wild-notifier-keyword-blacklist          | nil                                   |
| Tags whitelist (only notify for these)                                   | org-wild-notifier-tags-whitelist             | nil                                   |
| Tags blacklist (never notify for these)                                  | org-wild-notifier-tags-blacklist             | nil                                   |
| Predicate whitelist (only notify when a predicate matches)               | org-wild-notifier-predicate-whitelist        | nil                                   |
| Predicate blacklist (never notify when a predicate matches)              | org-wild-notifier-predicate-blacklist        | nil                                   |
| Timestamp types to notify for                                            | org-wild-notifier-entries                    | '("DEADLINE" "SCHEDULED" "TIMESTAMP") |
| Property for per-entry timestamp type override                           | org-wild-notifier-entries-property           | WILD_NOTIFIER_ENTRIES                 |
| Property for additional notification times                               | org-wild-notifier-alert-times-property       | WILD_NOTIFIER_NOTIFY_BEFORE           |
| Property for absolute notification times                                 | org-wild-notifier-notify-at-property         | WILD_NOTIFIER_NOTIFY_AT               |
| Time format for notification display                                     | org-wild-notifier-display-time-format-string | %I:%M %p                              |
| Times of day to show alerts for day-wide events                          | org-wild-notifier-day-wide-alert-times       | nil                                   |

*** Predicate Filters

~org-wild-notifier-predicate-whitelist~ and ~org-wild-notifier-predicate-blacklist~ are lists of functions that take a marker pointing to an Org entry. For example, to exclude Org habits from notifications:

#+BEGIN_SRC emacs-lisp
  (setq org-wild-notifier-predicate-blacklist
    '((lambda (marker)
        (-contains? (org-entry-properties marker 'all)
                    '("STYLE" . "habit")))))
#+END_SRC

*** Timestamp Type Filtering

By default, notifications are triggered for ~DEADLINE~, ~SCHEDULED~, and ~TIMESTAMP~ entries.  You can customize which timestamp types trigger notifications using ~org-wild-notifier-entries~:

#+BEGIN_SRC emacs-lisp
  ;; Only notify for deadlines
  (setq org-wild-notifier-entries '("DEADLINE"))

  ;; Notify for deadlines and scheduled items, but not plain timestamps
  (setq org-wild-notifier-entries '("DEADLINE" "SCHEDULED"))
#+END_SRC

You can also override this on a per-entry or per-file basis using the ~WILD_NOTIFIER_ENTRIES~ property (which supports inheritance):

#+BEGIN_SRC org
* Project with deadline-only notifications
  :PROPERTIES:
  :WILD_NOTIFIER_ENTRIES: DEADLINE
  :END:
** TODO Task with deadline
   DEADLINE: <2024-01-21 Sun 14:00>
   This will trigger notifications.
** TODO Task with scheduled time
   SCHEDULED: <2024-01-21 Sun 14:00>
   This will NOT trigger notifications (only DEADLINE is enabled).
#+END_SRC

*** Per-Entry Notification Times

You can specify additional notification times for individual entries using the ~WILD_NOTIFIER_NOTIFY_BEFORE~ property:

#+BEGIN_SRC org
* TODO Visit the chocolate factory
  SCHEDULED: <2018-01-04 Thu 16:00>
  :PROPERTIES:
  :WILD_NOTIFIER_NOTIFY_BEFORE: 80 60 55 43 5
  :END:
#+END_SRC

With this configuration, you'll receive notifications at 80, 60, 55, 43, 10 (the default), and 5 minutes before the event.

*** Absolute Notification Times

For notifications at specific times (rather than relative to the event), use the ~WILD_NOTIFIER_NOTIFY_AT~ property with org timestamps:

#+BEGIN_SRC org
* TODO Prepare for presentation
  SCHEDULED: <2024-01-21 Sun 14:00>
  :PROPERTIES:
  :WILD_NOTIFIER_NOTIFY_AT: <2024-01-21 Sun 09:00> <2024-01-20 Sat 20:00>
  :END:
#+END_SRC

This triggers notifications at the exact times specified, regardless of when the event is scheduled. Repeating timestamps are also supported (e.g., ~<2024-01-21 Sun 09:00 +1d>~).

*** Customizing Alert Styles

This package uses the [[https://github.com/jwiegley/alert][alert]] package for notifications. You can customize notification appearance using alert's [[https://github.com/jwiegley/alert#builtin-alert-styles][styles]] facility. See the alert source code for examples of defining custom styles.

** Installation

This package is available on [[https://melpa.org][MELPA]].

** Usage

org-wild-notifier operates in two modes:

- *Automatic mode:* Enable ~org-wild-notifier-mode~ to check for upcoming events once per minute.
- *Manual mode:* Call ~org-wild-notifier-check~ to perform a one-time check.

*** Interactive Scheduling

You can also schedule one-off notifications for the org heading at point:

- ~org-wild-notifier-schedule-at-point~ - Schedule a notification N minutes from now.
- ~org-wild-notifier-schedule-at-point-at-time~ - Schedule a notification at a specific time.
